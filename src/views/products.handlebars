<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styleProduct.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Lista de Productos</title>
</head>
<body>
    <header>
        <h1>Lista de Productos</h1>
    </header>

<form method="GET" action="/products" class="form-inline">
    <label for="limit">Limit:</label>
    <input type="number" id="limit" name="limit" value="{{limit}}" min="1" max="100">

    <label for="page">Page:</label>
    <input type="number" id="page" name="page" value="{{currentPage}}" min="1" required>

    <label for="query">Search:</label>
    <input type="text" id="query" name="query" value="{{query}}">

    <label for="sort">Sort:</label>
    <select id="sort" name="sort">
        <option value="">None</option>
        <option value="asc" {{#if (eq sort "asc")}}selected{{/if}}>Price Ascending</option>
        <option value="desc" {{#if (eq sort "desc")}}selected{{/if}}>Price Descending</option>
    </select>

    <button type="submit">Apply Filters</button>
</form>

<div class="container">
        {{#each products}}
        <div class="product">
            <img src="{{this.thumbnails}}" alt="{{this.title}}">
            <div>
                <h2>{{this.title}}</h2>
                <p>{{this.description}}</p>
                <p>Codigo: {{this.code}}</p>
                <p>Price: ${{this.price}}</p>
                <p>Stock: {{this.stock}}</p>
                <p>Categoria: {{this.category}}</p>
            </div>
        </div>
        {{/each}}
    </div>

<div>
    {{#if hasPreviousPage}}
        <a href="/products?page={{previousPage}}&limit={{limit}}&query={{query}}&sort={{sort}}">Previous</a>
    {{/if}}

    <p>Page {{currentPage}} of {{totalPages}}</p>

    {{#if hasNextPage}}
        <a href="/products?page={{nextPage}}&limit={{limit}}&query={{query}}&sort={{sort}}">Next</a>
    {{/if}}
</div>

</body>
</html>
